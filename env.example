PORT=3003

# Redis (required)
REDIS_URL=redis://redis:6379

# Price sources (set at least one)
COINGECKO_PRO_API_KEY=CG-gC89aCXuiKByjzxcUQ3tpu1q
COINMARKETCAP_API_KEY=REPLACE_ME

# Optional: allow using CoinGecko public API when COINGECKO_PRO_API_KEY is not set.
# NOTE: public API is rate-limited; use Pro for production.
COINGECKO_ALLOW_PUBLIC=false

# Optional: extend/override CoinGecko symbol->id mapping without code changes
# Format: SYMBOL=id,SYMBOL2=id2
COINGECKO_SYMBOL_ID_OVERRIDES=

BSC_RPC_URL=https://bsc-dataseed1.binance.org
VEILX_CONTRACT_ADDRESS=0x9C79B4a12eF8176B6a61142408A54Edf8336b0A6
# Optional overrides
PANCAKE_ROUTER_V2_ADDRESS=0x10ED43C718714eb63d5aA57B78B54704E256024E
BSC_USDT_CONTRACT_ADDRESS=0x55d398326f99059fF775485246999027B3197955

# Cache TTLs (seconds)
PRICE_CACHE_TTL_SECONDS=120
REQUEST_CACHE_TTL_SECONDS=30

# Across Bridge directory proxy (dynamic supported chains/routes + allowlist downlink)
# NOTE: mobile app calls this backend; keep allowlist small initially and expand gradually.
BRIDGE_ACROSS_API_BASE_URL=https://app.across.to/api
BRIDGE_ACROSS_TIMEOUT_MS=12000
BRIDGE_ACROSS_CHAINS_CACHE_TTL_SECONDS=300
BRIDGE_ACROSS_ROUTES_CACHE_TTL_SECONDS=60
# Allowlist mode: STRICT (filter by allowlist) | FULL (no filtering; return all Across-supported chains/tokens/routes)
BRIDGE_ACROSS_ALLOWLIST_MODE=FULL
BRIDGE_ACROSS_ALLOWED_CHAIN_IDS=1,10,42161,8453,56
BRIDGE_ACROSS_ALLOWED_TOKEN_SYMBOLS=ETH,USDC,USDT,DAI,USDC-BNB,USDT-BNB

# CORS (comma separated, default: *)
CORS_ALLOWED_ORIGINS=*

# Legal pages used by app links (e.g. /terms, /privacy)
# Leave empty to use backend built-in legal pages.
LEGAL_TERMS_URL=
LEGAL_PRIVACY_URL=
LEGAL_APP_NAME=Veil Wallet
LEGAL_ENTITY_NAME=VeilLabs
LEGAL_CONTACT_EMAIL=veillabs.wallet@gmail.com
LEGAL_CONTACT_ADDRESS=香港九龙区
LEGAL_EFFECTIVE_DATE=2026-02-20
LEGAL_GOVERNING_LAW=Laws of the Hong Kong Special Administrative Region
LEGAL_GOVERNING_LAW_ZH=香港特别行政区法律

# ==========================================
# Safe Tx Service proxy (multisig Phase 1)
# ==========================================
SAFE_TX_SERVICE_BASE_URL=https://api.safe.global/tx-service
# Optional (Bearer token). Keep server-side; do NOT put in the mobile app.
SAFE_TX_SERVICE_API_KEY=REPLACE_ME
SAFE_TX_SERVICE_TIMEOUT_MS=12000

# Safe Tx Service Gateway (Plan A) rate limits
SAFE_TX_GW_RL_WINDOW_SECONDS=60
SAFE_TX_GW_RL_IP_LIMIT=600
SAFE_TX_GW_RL_DEVICE_LIMIT=300

# ==========================================
# Solana Jupiter proxy (DEX quote/swap)
# ==========================================
# Mobile app may be unable to reach *.jup.ag directly on some networks.
# Proxy through this backend to improve reliability and control timeouts/rate limits.
JUPITER_LITE_API_BASE_URL=https://lite-api.jup.ag/swap/v1
JUPITER_TIMEOUT_MS=12000
JUPITER_RL_WINDOW_SECONDS=60
JUPITER_RL_IP_LIMIT=600

# ==========================================
# Social login auth server (M1)
# ==========================================
AUTH_ENABLED=true
AUTH_X_ENABLED=true
AUTH_TG_ENABLED=true
AUTH_SYNC_ENABLED=true
AUTH_BIND_ENABLED=true
AUTH_METRICS_ENABLED=true

# One-time auth code TTL (seconds).
# - App flow exchanges immediately, but manual testing or slow networks may exceed 60s.
# - Recommended for dev/staging: 180-300. Production can keep 60-120.
AUTH_ONE_TIME_CODE_TTL_SECONDS=180
AUTH_OAUTH_STATE_TTL_SECONDS=600
AUTH_WEB3AUTH_JWT_TTL_SECONDS=300
AUTH_ACCESS_TOKEN_TTL_SECONDS=900
AUTH_REFRESH_TOKEN_TTL_SECONDS=2592000

AUTH_WEB3AUTH_ISSUER=https://auth.status-mvp.local
AUTH_WEB3AUTH_AUDIENCE=status-mvp
AUTH_WEB3AUTH_KEY_ID=status-mvp-auth-v1
# Optional: Web3Auth dashboard credentials (keep server-side; do NOT put in the mobile app).
AUTH_WEB3AUTH_CLIENT_ID=
AUTH_WEB3AUTH_CLIENT_SECRET=
# RSA private key in PEM format. Required in production.
AUTH_WEB3AUTH_PRIVATE_KEY_PEM=

AUTH_APP_JWT_ISSUER=status-mvp-price-backend
AUTH_APP_JWT_AUDIENCE=status-mvp-app
# At least 32 bytes random secret in production.
AUTH_APP_JWT_SECRET=replace-me-dev-secret-at-least-32-bytes

# Allowed callback redirect prefixes for app deep links (comma-separated).
# Example: statusmvp://auth/callback,https://wallet.example.com/auth/callback
AUTH_APP_REDIRECT_ALLOWLIST=veilwallet://openlogin

# X OAuth
AUTH_X_CLIENT_ID=
AUTH_X_CLIENT_SECRET=
AUTH_X_REDIRECT_URI=
AUTH_X_SCOPES=tweet.read users.read offline.access
AUTH_X_AUTHORIZE_ENDPOINT=https://twitter.com/i/oauth2/authorize
AUTH_X_TOKEN_ENDPOINT=https://api.twitter.com/2/oauth2/token
AUTH_X_USERINFO_ENDPOINT=https://api.twitter.com/2/users/me

# Telegram login
AUTH_TG_BOT_TOKEN=
AUTH_TG_AUTH_MAX_AGE_SECONDS=600

# Risk control
AUTH_RISK_BLACKLIST_IPS=
AUTH_RISK_BLACKLIST_PROVIDER_SUBS=
AUTH_RISK_LOGIN_IP_LIMIT=20
AUTH_RISK_LOGIN_DEVICE_LIMIT=30
AUTH_RISK_BIND_ACCOUNT_LIMIT=20
AUTH_RISK_WINDOW_SECONDS=60


